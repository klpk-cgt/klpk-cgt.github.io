<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>今日金价</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: white;
        }
        
        h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        #current-date {
            font-size: 18px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1 id="gold-price">今日金价：加载中...</h1>
    <div id="current-date">日期：加载中...</div>

    <script>
        // API配置
        const API_URL = "https://v3.alapi.cn/api/gold";
        const TOKEN = "vtilq5ptzyhmputx1srvrdqowgvbe7"; // 请替换为您的实际token
        
        // 模拟数据 - 用于测试
        const mockData = {
            "request_id": "845959228099506176",
            "success": true,
            "message": "success",
            "code": 200,
            "data": [
                {
                    "symbol": "Au",
                    "name": "黄金",
                    "buy_price": 913.01,
                    "sell_price": 918.01,
                    "high_price": 918.01,
                    "low_price": 913.01
                }
            ],
            "time": 1762652397
        };
        
        // 初始化页面
        function init() {
            // 设置当前日期
            updateCurrentDate();
            
            // 尝试获取真实数据
            fetchRealPrice().then(success => {
                if (!success) {
                    // 如果真实数据获取失败，使用模拟数据
                    useMockData();
                }
            });
        }
        
        // 更新当前日期显示
        function updateCurrentDate() {
            const now = new Date();
            const year = now.getFullYear();
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const day = now.getDate().toString().padStart(2, '0');
            
            document.getElementById('current-date').textContent = 
                `日期：${year}年${month}月${day}日`;
        }
        
        // 获取真实价格
        async function fetchRealPrice() {
            try {
                // 调用API
                const response = await fetch(`${API_URL}?token=${TOKEN}`);
                const data = await response.json();
                
                if (data && data.success) {
                    updatePriceDisplay(data);
                    return true;
                } else {
                    throw new Error(data.message || 'API返回数据异常');
                }
            } catch (error) {
                console.error('获取真实价格失败:', error);
                return false;
            }
        }
        
        // 使用模拟数据
        function useMockData() {
            updatePriceDisplay(mockData);
        }
        
        // 更新价格显示
        function updatePriceDisplay(apiData) {
            // 查找黄金数据
            const goldData = apiData.data.find(item => item.symbol === 'Au');
            
            if (goldData) {
                // 显示价格
                document.getElementById('gold-price').textContent = 
                    `今日金价：${goldData.buy_price.toFixed(2)}元/克`;
            } else {
                // 如果没有找到黄金数据
                document.getElementById('gold-price').textContent = 
                    "今日金价：数据获取失败";
            }
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
